{"ast":null,"code":"/* import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BackgroundImage from './images/Backgroundimage.png'; // Adjusted path to import the image\n\n\nconst FirstHomePage = () => {\n    const navigate = useNavigate();\n\n    return (\n        <div className=\"min-h-screen flex flex-col\">\n           \n            <div className=\"relative h-screen bg-cover bg-center\" style={{ backgroundImage: `url(${BackgroundImage})` }}>\n                <div className=\"absolute inset-0 bg-black opacity-50\"></div>\n\n                <div className=\"relative z-10 flex flex-col items-center justify-center h-full text-center text-white\">\n                    <h1 className=\"text-4xl md:text-6xl font-bold mb-4\">Choose Your Option to Get Started</h1>\n                    <p className=\"text-lg md:text-2xl mb-8\">Explore trusted professionals and get started today!</p>\n                    <div className=\"space-x-4\">\n                      \n                        <button \n                            className=\"bg-blue-500 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-blue-600 transition duration-300\"\n                            onClick={() => {\n                                const role = sessionStorage.getItem('role');\n                        \n                                if (role === 'customer') {\n                                    alert('Access Denied: Customers are not allowed to provide services.');\n                                    // Optionally, redirect to a different page\n                                    navigate('/');\n                                } else {\n                                    // Allow tasker (or null role) to navigate\n                                    navigate('/Customerhome');\n                                }\n                            }}\n                        >\n                            Provide Service\n                            </button>\n                     \n                        <button \n                            className=\"bg-green-500 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-green-600 transition duration-300\"\n                            onClick={() => navigate('/Taskerhome')} // Navigate to TaskerHome\n                        >\n                            Find Service\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default FirstHomePage; */\n/* \nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BackgroundImage from './images/Backgroundimage.png'; // Adjust path to import the image\n\nconst FirstHomePage = () => {\n    const navigate = useNavigate();\n    const [role, setRole] = useState(null); // State to store the user role\n    const [loading, setLoading] = useState(true); // State to handle loading\n    const userId = sessionStorage.getItem('userID'); // Get userId from sessionStorage\n\n    useEffect(() => {\n        // Check if userId is available in session storage\n        if (userId) {\n            // If userId is present, fetch user role from the backend\n            fetch(`http://localhost:5000/api/get-user-role?userId=${userId}`)\n                .then((response) => {\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! Status: ${response.status}`);\n                    }\n                    return response.json();\n                })\n                .then((data) => {\n                    if (data.success) {\n                        setRole(data.role); // Set the role from the response\n                        if (data.taskerId) {\n                            sessionStorage.setItem('taskerId', data.taskerId);\n                        }\n                    } else {\n                        console.error('Error fetching user role:', data.message);\n                    }\n                    setLoading(false);\n                })\n                .catch((error) => {\n                    console.error('Error:', error);\n                    setLoading(false);\n                });\n        } else {\n            // If userId is not in session storage, set loading to false\n            setLoading(false);\n        }\n    }, [userId]);\n    \n\n    // If still loading or userId is not found, show loading or error message\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n\n    return (\n        <div className=\"min-h-screen flex flex-col\">\n\n            <div className=\"relative h-screen bg-cover bg-center\" style={{ backgroundImage: `url(${BackgroundImage})` }}>\n                <div className=\"absolute inset-0 bg-black opacity-50\"></div> \n\n    \n                <div className=\"relative z-10 flex flex-col items-center justify-center h-full text-center text-white\">\n                    <h1 className=\"text-4xl md:text-6xl font-bold mb-4\">Choose Your Option to Get Started</h1>\n                    <p className=\"text-lg md:text-2xl mb-8\">Explore trusted professionals and get started today!</p>\n                    <div className=\"space-x-4\">\n                        \n                        <button\n                            className=\"bg-blue-500 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-blue-600 transition duration-300\"\n                            onClick={() => {\n                                // Only allow navigation if role is not 'tasker'\n                                    navigate('/Customerhome');\n                            }}\n                        >\n                            Provide Service\n                        </button>\n                        \n                        <button\n                            className=\"bg-green-500 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-green-600 transition duration-300\"\n                            onClick={() => {\n                                if (role === 'tasker') {\n                                    alert('Access Denied: Taskers cannot provide services.');\n                                }else {\n                                    navigate('/Taskerhome');\n                                }\n                            }}\n                        >\n                            Find Service\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default FirstHomePage;\n */\n\n// Function to fetch user role and taskerId from the backend and store in session storage\nconst fetchUserRoleAndTaskerId = async userId => {\n  try {\n    const response = await fetch(`/api/get-user-role?userId=${userId}`);\n    const data = await response.json();\n    if (data.success) {\n      // Store role and taskerId in session storage\n      sessionStorage.setItem('role', data.role);\n      sessionStorage.setItem('taskerId', data.taskerId); // Store taskerId\n\n      console.log('Role:', data.role);\n      console.log('Tasker ID:', data.taskerId);\n    } else {\n      console.error('Error:', data.message);\n    }\n  } catch (error) {\n    console.error('Error fetching user data:', error);\n  }\n};\n\n// Example usage\nconst userId = sessionStorage.getItem('userId');\nif (userId) {\n  fetchUserRoleAndTaskerId(userId);\n}","map":{"version":3,"names":["fetchUserRoleAndTaskerId","userId","response","fetch","data","json","success","sessionStorage","setItem","role","taskerId","console","log","error","message","getItem"],"sources":["/home/basava/Documents/TASKflow/frontend/src/pages/Home.js"],"sourcesContent":["/* import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BackgroundImage from './images/Backgroundimage.png'; // Adjusted path to import the image\n\n\nconst FirstHomePage = () => {\n    const navigate = useNavigate();\n\n    return (\n        <div className=\"min-h-screen flex flex-col\">\n           \n            <div className=\"relative h-screen bg-cover bg-center\" style={{ backgroundImage: `url(${BackgroundImage})` }}>\n                <div className=\"absolute inset-0 bg-black opacity-50\"></div>\n\n                <div className=\"relative z-10 flex flex-col items-center justify-center h-full text-center text-white\">\n                    <h1 className=\"text-4xl md:text-6xl font-bold mb-4\">Choose Your Option to Get Started</h1>\n                    <p className=\"text-lg md:text-2xl mb-8\">Explore trusted professionals and get started today!</p>\n                    <div className=\"space-x-4\">\n                      \n                        <button \n                            className=\"bg-blue-500 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-blue-600 transition duration-300\"\n                            onClick={() => {\n                                const role = sessionStorage.getItem('role');\n                        \n                                if (role === 'customer') {\n                                    alert('Access Denied: Customers are not allowed to provide services.');\n                                    // Optionally, redirect to a different page\n                                    navigate('/');\n                                } else {\n                                    // Allow tasker (or null role) to navigate\n                                    navigate('/Customerhome');\n                                }\n                            }}\n                        >\n                            Provide Service\n                            </button>\n                     \n                        <button \n                            className=\"bg-green-500 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-green-600 transition duration-300\"\n                            onClick={() => navigate('/Taskerhome')} // Navigate to TaskerHome\n                        >\n                            Find Service\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default FirstHomePage; */\n/* \nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BackgroundImage from './images/Backgroundimage.png'; // Adjust path to import the image\n\nconst FirstHomePage = () => {\n    const navigate = useNavigate();\n    const [role, setRole] = useState(null); // State to store the user role\n    const [loading, setLoading] = useState(true); // State to handle loading\n    const userId = sessionStorage.getItem('userID'); // Get userId from sessionStorage\n\n    useEffect(() => {\n        // Check if userId is available in session storage\n        if (userId) {\n            // If userId is present, fetch user role from the backend\n            fetch(`http://localhost:5000/api/get-user-role?userId=${userId}`)\n                .then((response) => {\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! Status: ${response.status}`);\n                    }\n                    return response.json();\n                })\n                .then((data) => {\n                    if (data.success) {\n                        setRole(data.role); // Set the role from the response\n                        if (data.taskerId) {\n                            sessionStorage.setItem('taskerId', data.taskerId);\n                        }\n                    } else {\n                        console.error('Error fetching user role:', data.message);\n                    }\n                    setLoading(false);\n                })\n                .catch((error) => {\n                    console.error('Error:', error);\n                    setLoading(false);\n                });\n        } else {\n            // If userId is not in session storage, set loading to false\n            setLoading(false);\n        }\n    }, [userId]);\n    \n\n    // If still loading or userId is not found, show loading or error message\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n\n    return (\n        <div className=\"min-h-screen flex flex-col\">\n\n            <div className=\"relative h-screen bg-cover bg-center\" style={{ backgroundImage: `url(${BackgroundImage})` }}>\n                <div className=\"absolute inset-0 bg-black opacity-50\"></div> \n\n    \n                <div className=\"relative z-10 flex flex-col items-center justify-center h-full text-center text-white\">\n                    <h1 className=\"text-4xl md:text-6xl font-bold mb-4\">Choose Your Option to Get Started</h1>\n                    <p className=\"text-lg md:text-2xl mb-8\">Explore trusted professionals and get started today!</p>\n                    <div className=\"space-x-4\">\n                        \n                        <button\n                            className=\"bg-blue-500 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-blue-600 transition duration-300\"\n                            onClick={() => {\n                                // Only allow navigation if role is not 'tasker'\n                                    navigate('/Customerhome');\n                            }}\n                        >\n                            Provide Service\n                        </button>\n                        \n                        <button\n                            className=\"bg-green-500 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-green-600 transition duration-300\"\n                            onClick={() => {\n                                if (role === 'tasker') {\n                                    alert('Access Denied: Taskers cannot provide services.');\n                                }else {\n                                    navigate('/Taskerhome');\n                                }\n                            }}\n                        >\n                            Find Service\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default FirstHomePage;\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Function to fetch user role and taskerId from the backend and store in session storage\nconst fetchUserRoleAndTaskerId = async (userId) => {\n    try {\n        const response = await fetch(`/api/get-user-role?userId=${userId}`);\n        const data = await response.json();\n\n        if (data.success) {\n            // Store role and taskerId in session storage\n            sessionStorage.setItem('role', data.role);\n            sessionStorage.setItem('taskerId', data.taskerId);  // Store taskerId\n\n            console.log('Role:', data.role);\n            console.log('Tasker ID:', data.taskerId);\n        } else {\n            console.error('Error:', data.message);\n        }\n    } catch (error) {\n        console.error('Error fetching user data:', error);\n    }\n};\n\n// Example usage\nconst userId = sessionStorage.getItem('userId');\nif (userId) {\n    fetchUserRoleAndTaskerId(userId);\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAqCA;AACA,MAAMA,wBAAwB,GAAG,MAAOC,MAAM,IAAK;EAC/C,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,6BAA6BF,MAAM,EAAE,CAAC;IACnE,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAElC,IAAID,IAAI,CAACE,OAAO,EAAE;MACd;MACAC,cAAc,CAACC,OAAO,CAAC,MAAM,EAAEJ,IAAI,CAACK,IAAI,CAAC;MACzCF,cAAc,CAACC,OAAO,CAAC,UAAU,EAAEJ,IAAI,CAACM,QAAQ,CAAC,CAAC,CAAE;;MAEpDC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAER,IAAI,CAACK,IAAI,CAAC;MAC/BE,OAAO,CAACC,GAAG,CAAC,YAAY,EAAER,IAAI,CAACM,QAAQ,CAAC;IAC5C,CAAC,MAAM;MACHC,OAAO,CAACE,KAAK,CAAC,QAAQ,EAAET,IAAI,CAACU,OAAO,CAAC;IACzC;EACJ,CAAC,CAAC,OAAOD,KAAK,EAAE;IACZF,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;EACrD;AACJ,CAAC;;AAED;AACA,MAAMZ,MAAM,GAAGM,cAAc,CAACQ,OAAO,CAAC,QAAQ,CAAC;AAC/C,IAAId,MAAM,EAAE;EACRD,wBAAwB,CAACC,MAAM,CAAC;AACpC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}