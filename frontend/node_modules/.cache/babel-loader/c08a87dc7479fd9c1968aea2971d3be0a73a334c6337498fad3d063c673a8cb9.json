{"ast":null,"code":"/* import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\n\nconst Payment = () => {\n  const location = useLocation();\n  const { taskerId } = location.state || {};\n  const hourlyRate = sessionStorage.getItem('hourlyRate');  // Fetch hourly rate from session storage\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [contact, setContact] = useState('');\n  const [hours, setHours] = useState(1);\n  const [amount, setAmount] = useState(hourlyRate * hours);  // Calculated based on hours and hourly rate\n\n  useEffect(() => {\n    const loadRazorpayScript = () => {\n      const script = document.createElement('script');\n      script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n      script.async = true;\n      document.body.appendChild(script);\n    };\n    loadRazorpayScript();\n  }, []);\n\n  const handlePayment = async (e) => {\n    e.preventDefault();\n\n    if (!window.Razorpay) {\n      alert('Razorpay SDK failed to load. Please check your connection.');\n      return;\n    }\n\n    const totalAmount = hourlyRate * hours * 100;  // Total amount in paise\n    const partialAmount = totalAmount / 2;\n\n    const options = {\n      key: 'rzp_test_KA0MVYPAHSnecF',\n      amount: partialAmount,  // Set to partial amount\n      currency: 'INR',\n      name: 'Your Company Name',\n      description: 'Booking Tasker',\n      handler: async function (response) {\n        try {\n          await axios.post('/api/payment-verification', {\n            razorpay_payment_id: response.razorpay_payment_id,\n            razorpay_order_id: response.razorpay_order_id,\n            razorpay_signature: response.razorpay_signature,\n            taskerId,\n            totalAmount,\n            partialAmount,\n            hours,\n          });\n          alert('Payment successful!');\n        } catch (error) {\n          alert('Payment verification failed.');\n        }\n      },\n      prefill: { name, email, contact },\n      notes: { taskerId },\n      theme: { color: '#F37254' },\n    };\n\n    const razorpay = new window.Razorpay(options);\n    razorpay.open();\n  };\n\n  return (\n    <div className=\"payment-container\">\n      <div className=\"billing-info\">\n        <h2>Billing Information</h2>\n        <form onSubmit={handlePayment}>\n          \n          <button type=\"submit\">Pay Now</button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Payment;\n */","map":{"version":3,"names":[],"sources":["/home/basava/Documents/TASKflow/frontend/src/pages/Payment/payment.js"],"sourcesContent":["/* import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\n\nconst Payment = () => {\n  const location = useLocation();\n  const { taskerId } = location.state || {};\n  const hourlyRate = sessionStorage.getItem('hourlyRate');  // Fetch hourly rate from session storage\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [contact, setContact] = useState('');\n  const [hours, setHours] = useState(1);\n  const [amount, setAmount] = useState(hourlyRate * hours);  // Calculated based on hours and hourly rate\n\n  useEffect(() => {\n    const loadRazorpayScript = () => {\n      const script = document.createElement('script');\n      script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n      script.async = true;\n      document.body.appendChild(script);\n    };\n    loadRazorpayScript();\n  }, []);\n\n  const handlePayment = async (e) => {\n    e.preventDefault();\n\n    if (!window.Razorpay) {\n      alert('Razorpay SDK failed to load. Please check your connection.');\n      return;\n    }\n\n    const totalAmount = hourlyRate * hours * 100;  // Total amount in paise\n    const partialAmount = totalAmount / 2;\n\n    const options = {\n      key: 'rzp_test_KA0MVYPAHSnecF',\n      amount: partialAmount,  // Set to partial amount\n      currency: 'INR',\n      name: 'Your Company Name',\n      description: 'Booking Tasker',\n      handler: async function (response) {\n        try {\n          await axios.post('/api/payment-verification', {\n            razorpay_payment_id: response.razorpay_payment_id,\n            razorpay_order_id: response.razorpay_order_id,\n            razorpay_signature: response.razorpay_signature,\n            taskerId,\n            totalAmount,\n            partialAmount,\n            hours,\n          });\n          alert('Payment successful!');\n        } catch (error) {\n          alert('Payment verification failed.');\n        }\n      },\n      prefill: { name, email, contact },\n      notes: { taskerId },\n      theme: { color: '#F37254' },\n    };\n\n    const razorpay = new window.Razorpay(options);\n    razorpay.open();\n  };\n\n  return (\n    <div className=\"payment-container\">\n      <div className=\"billing-info\">\n        <h2>Billing Information</h2>\n        <form onSubmit={handlePayment}>\n          \n          <button type=\"submit\">Pay Now</button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Payment;\n */"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}